package com.craigwashere.wyse60.util;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.craigwashere.wyse60.data.Wyse60ViewModel;

public class CustomReceiver extends BroadcastReceiver
{
    final static String TAG = "CustomReceiver";
    private final Wyse60ViewModel mViewModel;
    public CustomReceiver(Wyse60ViewModel viewModel)
    {
        this.mViewModel = viewModel;
    }

    @Override
    public void onReceive(Context context, Intent intent)
    {
        char[] text = intent.getStringExtra("theMessage").toCharArray();

        StringBuilder debug_string = new StringBuilder();
        for (char c: text)
            debug_string.append(Integer.toHexString(c)).append(' ');

        mViewModel.getText().postValue(mViewModel.decode_text(text));
        Log.d(TAG, "onReceive: " + debug_string);
    }
}
